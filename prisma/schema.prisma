generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model usuario_sistema {
  id_usuario    String @id @default(uuid())
  login_usuario String
  senha_usuario String
  email_usuario String

  VENDEDOR VENDEDOR[]
  CLIENTE  CLIENTE[]
}

model EMPRESA {
  ID_EMPRESA        String @id @default(uuid())
  DESCRICAO_EMPRESA String
  DOCUMENTO_EMPRESA String

  VENDEDOR VENDEDOR[]
  PRODUTO  PRODUTO[]
  VENDA    VENDA[]
}

model VENDEDOR {
  ID_VENDEDOR        String @id @default(uuid())
  ID_USUARIO         String
  ID_EMPRESA         String
  DESCRICAO_VENDEDOR String

  USUARIO usuario_sistema @relation(fields: [ID_USUARIO], references: [id_usuario])
  EMPRESA EMPRESA         @relation(fields: [ID_EMPRESA], references: [ID_EMPRESA])
  VENDA   VENDA[]
}

model CLIENTE {
  ID_CLIENTE        String @id @default(uuid())
  ID_USUARIO        String
  DESCRICAO_USUARIO String
  DOCUMENTO_USUARIO String
  TELEFONE_USUARIO  String

  USUARIO usuario_sistema @relation(fields: [ID_USUARIO], references: [id_usuario])
  VENDA   VENDA[]
}

model PRODUTO {
  ID_PRODUTO        String @id @default(uuid())
  ID_EMPRESA        String
  DESCRICAO_PRODUTO String
  VL_CUSTO          Float
  VL_VENDA          Float

  EMPRESA    EMPRESA      @relation(fields: [ID_EMPRESA], references: [ID_EMPRESA])
  VENDA_ITEM VENDA_ITEM[]
}

model VENDA {
  ID_VENDA     String   @id @default(uuid())
  ID_CLIENTE   String
  ID_VENDEDOR  String
  ID_EMPRESA   String
  VL_TOTAL     Float
  VL_PAGO      Float
  VL_ACRESCIMO Float
  VL_DESCONTO  Float
  DT_VENDA     DateTime

  CLIENTE    CLIENTE      @relation(fields: [ID_CLIENTE], references: [ID_CLIENTE])
  VENDEDOR   VENDEDOR     @relation(fields: [ID_VENDEDOR], references: [ID_VENDEDOR])
  EMPRESA    EMPRESA      @relation(fields: [ID_EMPRESA], references: [ID_EMPRESA])
  VENDA_ITEM VENDA_ITEM[]
}

model VENDA_ITEM {
  ID_VENDA_ITEM String @id @default(uuid())
  ID_VENDA      String
  ID_PRODUTO    String
  VL_TOTAL      Float
  VL_CUSTO      Float
  VL_ACRESCIMO  Float
  VL_DESCONTO   Float
  NR_QUANTIDADE Float

  VENDA   VENDA   @relation(fields: [ID_VENDA], references: [ID_VENDA])
  PRODUTO PRODUTO @relation(fields: [ID_PRODUTO], references: [ID_PRODUTO])
}
